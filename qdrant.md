# –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –≤ Qdrant

## üéØ –ó–∞–¥–∞—á–∞

–ú—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å Qdrant** (—á–µ—Ä–µ–∑ Docker + CLI) –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–∞–Ω–¥, —á—Ç–æ–±—ã:

- –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ —Ö—Ä–∞–Ω–∏–ª–∞ —Å–≤–æ–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞—Ö;
- –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–≥ —Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —á—É–∂–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏;
- –¥–æ—Å—Ç—É–ø –±—ã–ª –≥–∏–±–∫–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —á—Ç–µ–Ω–∏–µ–º/–∑–∞–ø–∏—Å—å—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥/—Ä–æ–ª–µ–π.

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1) –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∫–∞–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

–í Qdrant –¥–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ **–∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö**. –ö–∞–∂–¥–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ–∏ –≤–µ–∫—Ç–æ—Ä–∞ –∏ payload (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ).

–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ:

- —Å–æ–∑–¥–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏** ‚Äî –ø–æ –æ–¥–Ω–æ–π –Ω–∞ –∫–æ–º–∞–Ω–¥—É;
- –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–¥–Ω—É –∫–æ–ª–ª–µ–∫—Ü–∏—é** –∏ —Ä–∞–∑–ª–∏—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ payload-—Ñ–∏–ª—å—Ç—Ä—ã (multitenancy).

---

## üîê –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

### üìç API –∫–ª—é—á–∏ (API Keys)

Qdrant –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ **API-–∫–ª—é—á–∏**:

- –∫–ª—é—á —Å **–ø–æ–ª–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º**;
- **read-only API key** (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å.

---

## üõ°Ô∏è Role-Based Access Control (RBAC) —á–µ—Ä–µ–∑ JWT

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ **1.9+**, Qdrant –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (RBAC)** —Å –ø–æ–º–æ—â—å—é **JWT (JSON Web Tokens)**. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π, –¥–µ–π—Å—Ç–≤–∏–π (read/write) –∏ –¥–∞–∂–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤;
- —Å–æ–∑–¥–∞–≤–∞—Ç—å **—Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–∞–≤–∞–º–∏**, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/—Å–µ—Ä–≤–∏—Å—É.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Qdrant –≤–∫–ª—é—á–∞–µ—Ç—Å—è RBAC  
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π JWT —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏  
3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è JWT, –∏ Qdrant –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è

> –ó–∞–º–µ—á–∞–Ω–∏–µ: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é RBAC **–≤—ã–∫–ª—é—á–µ–Ω** –∏ –¥–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ API –∫–ª—é—á–∞–º–∏.

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Qdrant —á–µ—Ä–µ–∑ Docker

### üß± –ó–∞–ø—É—Å–∫ Qdrant —Å RBAC –∏ API key

```bash
docker run -d \
  --name qdrant \
  -p 6333:6333 \
  -e QDRANT__SERVICE__API_KEY=super_secret_master_key \
  -e QDRANT__SERVICE__JWT_RBAC=true \
  qdrant/qdrant:latest
```

–ó–¥–µ—Å—å:
- `API_KEY` ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–ª—é—á –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- `JWT_RBAC=true` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç RBAC —Å JWT.

---

## ü™™ –ü–æ–ø–∞—Å—Ç—å –≤ CLI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ø–∞—Å—Ç—å –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é:

```bash
docker exec -it qdrant /bin/sh
```

---

## üß† –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞

### üß© 1) –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥

```
team_alpha_docs
team_beta_docs
```

–ö–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–µ –≤—ã–¥–∞—ë—Ç—Å—è —Å–≤–æ–π JWT/API-–∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é (read/write).

---

### üß© 2) –û–¥–Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ payload

–ï—Å–ª–∏ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ –∫–æ–º–∞–Ω–¥, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—ë –≤ **–æ–¥–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏** –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:

```json
{
  "id": "uuid",
  "vector": [...],
  "payload": {
    "team": "team_alpha"
  }
}
```

–ò –ø—Ä–∏ –ø–æ–∏—Å–∫–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä:

```bash
curl -X POST "http://localhost:6333/collections/rag_vectors/points/search" \
  -H "Content-Type: application/json" \
  --data '{
    "vector": [...],
    "filter": { "must": [{ "key": "team", "match": { "value": "team_alpha" } }] },
    "limit": 10
  }'
```

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **payload-based multitenancy**.

---

## üìú –†–µ–∑—é–º–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ü–æ–¥—Ö–æ–¥ | –ì–¥–µ –ø–æ–¥—Ö–æ–¥–∏—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|---------------|------------|
| **–û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏** | –ö–æ–≥–¥–∞ –∫–æ–º–∞–Ω–¥ –Ω–µ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ | –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ |
| **–ï–¥–∏–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è + payload multitenancy** | –ö–æ–≥–¥–∞ –º–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥ | –ù–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è |
| **JWT RBAC + scoped tokens** | –î–ª—è –≥–∏–±–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–∞–≤ | –¢–æ–∫–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫—Ç–æ –∏ —á—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å |

---

## üìå –ß—Ç–æ —É—á–∏—Ç—ã–≤–∞—Ç—å

- –í–∫–ª—é—á–µ–Ω–∏–µ RBAC –ø–æ—Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –≤—ã –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ JWT —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º.  
- –ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—É—á–∞—é—Ç –ª–∏–±–æ scoped API keys, –ª–∏–±–æ JWT —Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ –∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–∏.  
- –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ **—Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–∞–Ω–¥**, RBAC + JWT ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±.
